# Постановка задачи
## Что?
Телеграм-бот с развлекательными функциями:
<br>1. Игра в камень-ножницы-бумага с самообучающимся ИИ.
<br>2. Диалоговое общение с ИИ на базе чат-ботов (chatGPT, Character AI и аналоги).
<br>3. Генерация случайных шуток.
<br>4. Генерация случайных картинок.
<br>5. Подбор интересных событий и фактов по указанным датам.
<br>6. Мемогенератор.

## Чтобы что?
Чтобы отточить навыки создания телеграм-ботов, создания и имплементации в прод своих моделей машинного обучения и
адаптации сторонних разработок ИИ.
В последствии использовать бот в личных целях.

## Что бот должен уметь?
<br>1. [X] игра камень-ножницы-бумага:
* Отправлять пользователю инлайн клавиатуру с кнопками: Камень, Ножницы, Бумага, статистика, в главное меню
* Генерировать вариант ответа на основании предиктивной модели
* Обрабатывать вариант пользователя, выводить на экран выбор бота (сразу под выбором пользователя) и сообщать, кто победил
* Сохранять историю игр с пользователем. Формировать статистику и выводить на экран по запросу пользователя. Также использовать историю для самообучения

<br>2. [ ] диалоговое общение с ИИ:
* Отправлять пользователю инлайн клавиатуру с кнопками "вернуться в главное меню"; при наличии истории беседы, также отправлять кнопку сброса контекста
* Передавать сообщение пользователя по API чат-боту, забирать ответ и выводить на экране в формате диалога
* Общаться с пользователем в роли персонажа (Т-800). Для этого перед запросом пользователя добавить несколько сообщений для инициации персонажа
* Для сохраниения контекста беседы, вести историю диалога на глубину 10 сообщений (зависит от возможностей чат-бота), добавлять эти сообщения в начало (после инициации персонажа)

<br>3. [X] генерация случайных шуток:
* Отправлять пользователю инлайн клавиатуру с кнопками: несколько кнопок с жанрами шуток + кнопка возвращения в главное меню.
* Через API запрашивать шутку согласно кнопке нажатого жанра
* дополнительный функционал - после отправки шутки дополнительно выводить кнопку "перевода шутки с английского на русский". При нажатии кнопки перевода присылать сообщение с текстом перевода под текстом оригинала.


## Описание взаимодействия с ботом
<br>1. Пользователь отправляет команду /start боту
<br>2. Бот приветсвует пользователя и предлагает выбрать из доступного функционала:
   * камень-ножницы-бумага
   * генерация случайных шуток
   * ...

<br>3. На этом этапе пользователь может совершить 4 действия:
   * выбрать кнопку сыграть в камень-ножницы-бумага
   * выбрать кнопку сгенерировать шутку
   * отправить в чат команду /help
   * отправить в чат любое другое сообщение

<br>3.1. Пользователь нажимает кнопку сыграть в камень-ножницы-бумага:
* бот отправляет клавиатуру с кнопками: ['камень', 'ножницы', 'бумага', 'назад', 'статистика'] и сообщение "что выберешь?"
* пользователь может совершить 5 действий:
  * выбрать одну из трех кнопок ['камень', 'ножницы', 'бумага']
  * выбрать кнопку ['назад']
  * выбрать кнопку ['статистика']
  * отправить в чат команду /help
  * отправить в чат любое другое сообщение

<br>3.1.1. при выборе пользователем любой из кнопок ['камень', 'ножницы', 'бумага'], бот:
* Обращается в базу данных к истории игр с пользователем
* Запускает обучение предсказательной модели, использующей данные предыдущих игр. Если до этого игр не было, в алгоритме должна быть предусмотрена случайная генерация выбора
* На основании предсказательной модели делает выбор
* Сравнивает выбор пользователя со своим, определяя победителя
* Отправляет в чат результаты игры: выбор пользователя - выбор бота - победитель
* Заносит результаты игры в базу данных, массив вида [[user_id, user_choice, bot_choise, flag_user_vin], ...]

<br>3.1.2. При выборе пользователем кнопки ['назад']:
* Бот выполняет пункт 2, но без приветсвия пользователя

<br>3.1.3. При выборе пользователем кнопки ['статистика']:
* бот обращается к базе данных и выводит для этого пользователя в чат инфо:
  * количество сыгранных игр
  * % побед пользователя
  * % ничьих
  * % поряжений пользователя
  * долю выборов кнопки ['камень]
  * долю выборов кнопки ['ножницы']
  * долю выборов кнопки ['бумага']
* дополнительный функционал: выводить инфо в виде графиков

<br>3.1.4. При отправке пользователем команды /help:
* бот отправляет в чат сообщение "Выбери одну из кнопок ['камень', 'ножницы', 'бумага'], чтобы сыграть со мной. Нажми кнопку ['назад'], чтобы вернуться в предыдущее меню. Нажми кнопку ['статистика'], чтобы узнать статистику по сыгранным играм"

<br>3.2. Пользователь нажимает ['случайные шутки']:
* бот отправляет клавиатуру с кнопками: ['жанр 1', 'жанр ...', 'жанр n', 'назад'] и сообщение "какие шутки тебе больше нравятся?". Вместо жанров подставить возможные жанры.
* пользователь может совершить 5 действий:
  * выбрать одну из кнопок жанров
  * выбрать кнопку ['назад']
  * отправить в чат команду /help
  * отправить в чат любое другое сообщение

<br>3.2.1. При выборе пользователем кнопки с жанром:
* Бот по API запрашивает у внешнего ресурса шутку согласно выбранному жанру и выводит на экран

<br>3.2.2. При выборе пользователем кнопки ['назад']:
* Бот выполняет пункт 2, но без приветсвия пользователя

<br>3.2.3. При отправке пользователем команды /help:
* бот отправляет в чат сообщение "Выбери одну из кнопок с интересующим жанром и получи шутку. Нажми кнопку ['назад'], чтобы вернуться в предыдущее меню.
